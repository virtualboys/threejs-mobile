<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<meta name="HandheldFriendly" content="true" />

	<title>Touch pad control test</title>

	<link rel="stylesheet" href="./css/touch-pad.css">
	<link rel="stylesheet" href="./css/main.css">
</head>

<body>
	<div id="container">

		<div class="container_bg">
			<div id="solid"></div>
			<div id="gradient"></div>
		</div>

		<div id="container_3d"></div>
	</div>
	<!-- <button id="stopPreviewButton" onclick="window.stopPreview()">PREVIEWING</br>Reload Scene From Server</button> -->

	<script type="text/javascript" src="./libs/jquery-2.1.4.js"></script>
	<script type="text/javascript" src="./libs/threejs/three.js"></script>
	<script type="text/javascript" src="./libs/threejs/FirstPersonControls.js"></script>
	<script type="text/javascript" src="./libs/threejs/PointerLockControls.js"></script>
	<script type="text/javascript" src="./libs/threejs/Detector.js"></script>
	<script type="text/javascript" src="./libs/threejs/SceneLoader.js"></script>
	<script type="text/javascript" src="./libs/threejs/GLTFLoader.js"></script>

	<script type="text/javascript" src="./libs/cannon.min.js"></script>

	<script type="text/javascript" src="./js/movement-pad.js"></script>
	<script type="text/javascript" src="./js/rotation-pad.js"></script>
	<script type="text/javascript" src="./js/touch-controls.js"></script>
	<script type="text/javascript" src="./js/fps-multiplatform-controls.js"></script>
	<script type="text/javascript" src="./js/utils.js"></script>

	<script type="text/javascript">
		function pdef(e) {

			e.stopPropagation();
			e.preventDefault(); // prevent scrolling
			e.stopImmediatePropagation();
		}
		window.addEventListener('touchstart', pdef, { passive: false });
		window.addEventListener('touchend', pdef, { passive: false });
		window.addEventListener('touchmove', pdef, { passive: false });

	</script>


	<script type="module">

		import { Storage as _Storage } from './threejs-source/editor/js/Storage.js';

		var storage = new _Storage();
		storage.init(function () {
			storage.getPreview(function (gltf) {

				if (gltf !== undefined) {
					window.previewGLTF = gltf;
					console.log("loaded!");
				}

				startScene();
			});
		});

		function stopPreview() {
			storage.clearPreview(function () {
				location.reload();
			});
		}

		window.stopPreview = stopPreview;
	</script>

	<script type="text/javascript" src="./js/example.js"></script>
</body>

</html>